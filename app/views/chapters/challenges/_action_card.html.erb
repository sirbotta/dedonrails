<div class="card">
  <div class="card-content">
    <span class="card-title">
      <%= link_to player_action.character.name, player_action.character %>&nbsp;
      <%= t(player_action.task_type) %>&nbsp;
      <%= image_tag(player_action.targetable.image.url(:mini), class: 'mini-image') %>
      <%= link_to player_action.targetable.name, player_action.targetable %>
    </span>
    <div class="row">
      <div class="col s2">
        <%= image_tag(player_action.character.avatar.url(:thumb), class: 'thumb-image') %>
      </div>
      <div class="col s10">
        <p>
          Description: <%= player_action.description %>
        </p>
        <p>
          Roll: <%= player_action.die_roll.result %>
        </p>
        <p>
          Resolution: <%= player_action.resolution %>
        </p>
        <p> Last edit on : <%= player_action.updated_at %> </p>
      </div>
    </div>
  </div>
  <div class="card-action">
    <a class="modal-trigger" href="#modal_action<%= player_action.id %>_resolution"><%= material_icon.edit %></a>
    <%= link_to material_icon.delete, player_action, method: :delete, data: {confirm: 'Are you sure?'} %>
  </div>
</div>

<div id="modal_action<%= player_action.id %>_resolution" class="modal">
  <div class="modal-content">
    <%= form_with(model: player_action, local: true) do |form| %>
        <div class="row">
          <div class="input-field col s8">
            <%= form.text_area :description, class: 'materialize-textarea' %>
            <%= form.label :description %>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s8">
            <%= form.text_area :resolution, class: 'materialize-textarea' %>
            <%= form.label :resolution %>
          </div>
        </div>
        <div class="modal-footer">
          <%= form.submit class: 'btn' %>
        </div>
    <% end %>
  </div>
</div>
